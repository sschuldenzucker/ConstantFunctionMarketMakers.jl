var documenterSearchIndex = {"docs":
[{"location":"api.html#API-Reference","page":"API Reference","title":"API Reference","text":"There are two main types of objects: AMMs and Trading Curves","category":"section"},{"location":"api.html#AMMs","page":"API Reference","title":"AMMs","text":"","category":"section"},{"location":"api.html#AMM-base-type","page":"API Reference","title":"AMM base type","text":"The following is the supertype of all AMMs.","category":"section"},{"location":"api.html#Base-AMMs","page":"API Reference","title":"Base AMMs","text":"","category":"section"},{"location":"api.html#Transformed-AMMs","page":"API Reference","title":"Transformed AMMs","text":"These take an AMM and yield an AMM that's transformed in some way.","category":"section"},{"location":"api.html#Shorthands","page":"API Reference","title":"Shorthands","text":"","category":"section"},{"location":"api.html#Querying-AMMs","page":"API Reference","title":"Querying AMMs","text":"AMMs themselves only store some basic information.","category":"section"},{"location":"api.html#Trading-Curves","page":"API Reference","title":"Trading Curves","text":"","category":"section"},{"location":"api.html#Creating-Trading-Curves-from-AMMs","page":"API Reference","title":"Creating Trading Curves from AMMs","text":"Given an AMM and parameters defining a starting point / invariant, one can create a TradingCurve from an AMM like so:","category":"section"},{"location":"api.html#Querying-Trading-Curves","page":"API Reference","title":"Querying Trading Curves","text":"With a trading curve constructed, we can query the curve in various ways.","category":"section"},{"location":"api.html#Helpers","page":"API Reference","title":"Helpers","text":"","category":"section"},{"location":"api.html#Querying-Liquidity-Density","page":"API Reference","title":"Querying Liquidity Density","text":"","category":"section"},{"location":"api.html#ConstantFunctionMarketMakers.AMM","page":"API Reference","title":"ConstantFunctionMarketMakers.AMM","text":"AMM base interface. An AMM has parameters applied but has not been initialized at a given liquidity. Corresponds to the \"CFMM\" concept in the liquidity density paper.\n\nTODO describe expected interface. Probably in a separate docs page.\n\n\n\n\n\n","category":"type"},{"location":"api.html#ConstantFunctionMarketMakers.CPMM","page":"API Reference","title":"ConstantFunctionMarketMakers.CPMM","text":"CPMM()\n\nConstant-product AMM.\n\nx cdot y = L^2\n\n\n\n\n\n","category":"type"},{"location":"api.html#ConstantFunctionMarketMakers.C2LP","page":"API Reference","title":"ConstantFunctionMarketMakers.C2LP","text":"C2LP(alpha, beta)\n\nGyroscope 2CLP, aka concentrated constant-product, aka a single Uniswap v3 bracket.\n\n(x + a) cdot (y + b) = L^2\n\nwhere a = l  sqrtbeta and b = l cdot sqrtalpha.\n\nSee also the Gyroscope docs.\n\n\n\n\n\n","category":"type"},{"location":"api.html#ConstantFunctionMarketMakers.ECLP","page":"API Reference","title":"ConstantFunctionMarketMakers.ECLP","text":"ECLP(alpha, beta, q, lambda)\n\nGyroscope Elliptic Concentrated Liquidity Pool\n\nHere:\n\nalpha and beta are the price range\nq is the target price of concentration\nlambda >= 1 is the amplification factor\n\nSee the Gyroscope docs.\n\n\n\n\n\n","category":"type"},{"location":"api.html#ConstantFunctionMarketMakers.StableSwap","page":"API Reference","title":"ConstantFunctionMarketMakers.StableSwap","text":"StableSwap(A)\n\nStableSwap curve.\n\nHere A is the amplification factor.\n\nNote: Only 2 assets are supported right now and also assumed.\n\nNote: The StableSwap paper has an inconsistency vs Curve's (and most) implementations in its treatment of the amplification parameter A. In this library, all user-facing operations (construction and display) use the \"code form\". Internally, we use the \"math form\".\n\n\n\n\n\n","category":"type"},{"location":"api.html#ConstantFunctionMarketMakers.WeightedPool","page":"API Reference","title":"ConstantFunctionMarketMakers.WeightedPool","text":"WeightedPool(delta)\n\nA weighted product pool (i.e., Balancer's weighted pool).\n\nx^delta * y^1-delta = L  \n\nThe delta parameter describes the weighting towards either asset. delta = 0.5 is equivalent to the CPMM.\n\ndelta must be strictly between 0 and 1.\n\n\n\n\n\n","category":"type"},{"location":"api.html#ConstantFunctionMarketMakers.CPSMM","page":"API Reference","title":"ConstantFunctionMarketMakers.CPSMM","text":"CPSMM(delta)\n\nA constant-power-sum-pool (like YieldSpace).\n\nx^delta + y^delta = L^delta\n\nwhere delta is strictly between 0 and 1. delta to 1 is the constant-sum AMM and delta to 0 is the CPMM.\n\n\n\n\n\n","category":"type"},{"location":"api.html#ConstantFunctionMarketMakers.rate_scale","page":"API Reference","title":"ConstantFunctionMarketMakers.rate_scale","text":"rate_scale(amm, rx, ry) <: AMM\namm |> rate_scale(rx, ry)\n\nA given AMM scaled by the given rates.\n\n\n\n\n\n","category":"function"},{"location":"api.html#ConstantFunctionMarketMakers.concentrate","page":"API Reference","title":"ConstantFunctionMarketMakers.concentrate","text":"concentrate(amm, alpha, beta) <: AMM\nconcentrate(tc, alpha, beta)\namm |> concentrate(alpha, beta)\ntc |> concentrate(alpha, beta)\n\nConcentrate the given AMM or TradingCurve into a sub-range. This corresponds to (TOOD Theorem ref). (alpha, beta) must be a sub-interval of the price range.\n\nFor AMMs, returns a new AMM concentrated into that sub-range.\n\nFor trading curves, returns the corresponding curve when preserving the given trading curve's initial price and value. (the initial price must be within the new price bounds)\n\n\n\n\n\n","category":"function"},{"location":"api.html#ConstantFunctionMarketMakers.named","page":"API Reference","title":"ConstantFunctionMarketMakers.named","text":"named(amm, name) <: AMM\namm |> named(name)\n\nAttach a custom name to an AMM\n\n\n\n\n\n","category":"function"},{"location":"api.html#ConstantFunctionMarketMakers.flip","page":"API Reference","title":"ConstantFunctionMarketMakers.flip","text":"flip(amm)\nflip(tc)\n\nFlip the x and y assets.\n\nFlipping an AMM changes what the two assets mean. Flipping a TradingCurve yields the same TradingCurve with the same initial state but with the x and y assets flipped.\n\n\n\n\n\n","category":"function"},{"location":"api.html#ConstantFunctionMarketMakers.constant_rate_scaled_eclp","page":"API Reference","title":"ConstantFunctionMarketMakers.constant_rate_scaled_eclp","text":"constant_rate_scaled_eclp(alpha, beta, q; q_inner)\n\nDefine a rate-scaled ECLP scaled by a constant rate. alpha, beta, and q refer to \"outer\" prices. The inner parameters will be chosen such that these outer prices are exhibited, and the inner q is 1.0. Set q_inner to change that. This can be used to adjust the peak (since it's not exactly at q, only approximately). lam always refers to the inner curve.\n\n\n\n\n\n","category":"function"},{"location":"api.html#ConstantFunctionMarketMakers.alphabeta","page":"API Reference","title":"ConstantFunctionMarketMakers.alphabeta","text":"alpha, beta = alphabeta(amm)\nalpha, beta = alphabeta(tc)\n\nThe lower and upper end of the price range, or (0.0, Inf).\n\nRequired for AMMs with concentrated price range.\n\n\n\n\n\n","category":"function"},{"location":"api.html#ConstantFunctionMarketMakers.kind_name","page":"API Reference","title":"ConstantFunctionMarketMakers.kind_name","text":"kind_name(amm)\nkind_name(tc)\n\nName of the AMM type (without parameters)\n\nOptional.\n\n\n\n\n\n","category":"function"},{"location":"api.html#ConstantFunctionMarketMakers.short_str","page":"API Reference","title":"ConstantFunctionMarketMakers.short_str","text":"short_str(amm; as_bp::Bool)\nshort_str(tc; as_bp::Bool)\n\nShort description of the AMM with parameters. If as_bp=true, render all prices in bp.\n\nOptional, rarely needs an overload\n\n\n\n\n\n","category":"function"},{"location":"api.html#ConstantFunctionMarketMakers.TradingCurve","page":"API Reference","title":"ConstantFunctionMarketMakers.TradingCurve","text":"A trading curve. It is expected that this has a field .common of type TCCommon.\n\nSOMEDAY that's kinda bad actually.\n\n\n\n\n\n","category":"type"},{"location":"api.html#ConstantFunctionMarketMakers.tc_v_p","page":"API Reference","title":"ConstantFunctionMarketMakers.tc_v_p","text":"tc_v_p(amm::AMM, v, p)\n\nTrading curve of an AMM at the given portfolio value v and price p.\n\n\n\n\n\n","category":"function"},{"location":"api.html#ConstantFunctionMarketMakers.tc_l_p","page":"API Reference","title":"ConstantFunctionMarketMakers.tc_l_p","text":"tc_l_p(amm::AMM, l, p)\n\nTrading curve of an AMM at the given invariant l and price p\n\n\n\n\n\n","category":"function"},{"location":"api.html#ConstantFunctionMarketMakers.tc_t","page":"API Reference","title":"ConstantFunctionMarketMakers.tc_t","text":"tc_t(amm::AMM, t) <: TradingCurve\n\nTrading curve of an AMM at the given balances t.\n\n\n\n\n\n","category":"function"},{"location":"api.html#ConstantFunctionMarketMakers.TCCommon","page":"API Reference","title":"ConstantFunctionMarketMakers.TCCommon","text":"Common fields for trading curves. Every TradingCurve has a .common member of this type.\n\nSOMEDAY that's not a good design actually.\n\nFields:\n\namm - The AMM of the trading curve\nl - The invariant\nt_init - Initial balances\np_init - Initial price\n\n\n\n\n\n","category":"type"},{"location":"api.html#ConstantFunctionMarketMakers.y_x","page":"API Reference","title":"ConstantFunctionMarketMakers.y_x","text":"y_x(tc, x)\n\ny balance given the x balance.\n\n\n\n\n\n","category":"function"},{"location":"api.html#ConstantFunctionMarketMakers.x_y","page":"API Reference","title":"ConstantFunctionMarketMakers.x_y","text":"x_y(tc, y)\n\nx balance given the y balance.\n\n\n\n\n\n","category":"function"},{"location":"api.html#ConstantFunctionMarketMakers.t_p","page":"API Reference","title":"ConstantFunctionMarketMakers.t_p","text":"t_p(tc::TradingCurve, p)\n\nBalances at given price p\n\n\n\n\n\n","category":"function"},{"location":"api.html#ConstantFunctionMarketMakers.t_plus","page":"API Reference","title":"ConstantFunctionMarketMakers.t_plus","text":"x_plus, y_plus = t_plus(tc)\n\nMaximal x and and y values along the trading curve. Inf if none, respectively.\n\nTODO refactor: this gives an error if not implemented but alphabeta defaults to (0, Inf). Inconsistent. This behavior is prob better.\n\n\n\n\n\n","category":"function"},{"location":"api.html#ConstantFunctionMarketMakers.v_init","page":"API Reference","title":"ConstantFunctionMarketMakers.v_init","text":"v_init(common::TCCommon)\nv_init(tc)\n\nPortfolio value / TVL denominated in y asset units, at pool initialization\n\n\n\n\n\n","category":"function"},{"location":"api.html#ConstantFunctionMarketMakers.union_priceset","page":"API Reference","title":"ConstantFunctionMarketMakers.union_priceset","text":"union_priceset(amms) :: Vector{Tuple{Float64,Float64}}\nunion_priceset(tcs)\n\nReturn the union of the price sets of a set of AMMs as a minimal union of intervals. Can be used with both AMMs and TCs.\n\n\n\n\n\n","category":"function"},{"location":"api.html#ConstantFunctionMarketMakers.intersect_priceset","page":"API Reference","title":"ConstantFunctionMarketMakers.intersect_priceset","text":"intersect_priceset(amms) :: Union{Nothing,Tuple{Float64,Float64}}\nintersect_priceset(tcs)\n\nReturn the intersection of the price sets of a set of AMMs. Returns Nothing if the AMMs don't intersect. Can be used with both AMMs and TCs.\n\n\n\n\n\n","category":"function"},{"location":"api.html#ConstantFunctionMarketMakers.dydp_p","page":"API Reference","title":"ConstantFunctionMarketMakers.dydp_p","text":"dydp_p(tc, p)\n\nAbsolute liquidity density at the given price\n\nNOTE: This is only defined for AMMs where this is fast to compute. Don't use this for plotting; instead, use sample_dydp_p().\n\n\n\n\n\n","category":"function"},{"location":"api.html#ConstantFunctionMarketMakers.dydlogp_p","page":"API Reference","title":"ConstantFunctionMarketMakers.dydlogp_p","text":"dydlogp_p(tc, p)\n\nRelative liquidity density at the given price\n\nNOTE: This is only defined for AMMs where this is fast to compute. Don't use this for plotting; instead, use sample_dydlogp_p().\n\n\n\n\n\n","category":"function"},{"location":"api.html#ConstantFunctionMarketMakers.dydp_max","page":"API Reference","title":"ConstantFunctionMarketMakers.dydp_max","text":"dydp_max(tc; plim=(0.0, Inf)) :: Tuple{Float64,Float64}\n\n(price, value) of the maximal value of dydp (absolute liquidity density), optionally within the interval plim. If plim is not a subset of the price set, the intersection is taken.\n\nKeyword parameters\n\nplim: If given, limit to that range. must be given for trading curves with infinite price range.\nunit: Unit of price change. The default is 1.0 = ±1.\npathological: If true, we include pathological limit behavior for some AMMs (e.g., StableSwap's infinite LD if plim includes 0.0). Otherwise, these points are ignored.\n\n\n\n\n\n","category":"function"},{"location":"api.html#ConstantFunctionMarketMakers.dydlogp_max","page":"API Reference","title":"ConstantFunctionMarketMakers.dydlogp_max","text":"dydlogp_max(tc::TradingCurve; plim=(0.0, Inf)) :: Tuple{Float64,Float64}\n\n(price, value) of the value of dydlogp (relative liquidity density), optionally within the interval plim. If plim is not a subset of the price set, the intersection is taken.\n\nKeyword parameters\n\nplim: If given, limit to that range. must be given for trading curves with infinite price range.\nunit: Unit of price change. The default is ±1%.\npathological: If true, we include pathological limit behavior for some AMMs (e.g., StableSwap's infinite LD if plim includes 0.0). Otherwise, these points are ignored.\n\n\n\n\n\n","category":"function"},{"location":"api.html#ConstantFunctionMarketMakers.sample_dydp_p","page":"API Reference","title":"ConstantFunctionMarketMakers.sample_dydp_p","text":"sample_dydp_p(tc)\n\nSample (p, dydp) points (absolute LD curve) from the given TradingCurve. Returns a vector of pairs.\n\nKeyword parameters\n\nplim: If given, limit to that range. must be given for trading curves with infinite price range.\nunit: Unit of price change. The default is 1.0 = ±1.\n\n\n\n\n\n","category":"function"},{"location":"api.html#ConstantFunctionMarketMakers.sample_dydlogp_p","page":"API Reference","title":"ConstantFunctionMarketMakers.sample_dydlogp_p","text":"sample_dydlogp_p(tc)\n\nSample (p, dydlogp) points (relative LD curve) from the given TradingCurve. Returns a vector of pairs.\n\nKeyword parameters\n\nplim: If given, limit to that range. must be given for trading curves with infinite price range.\nunit: Unit of price change. The default is 0.01 = ±1%.\n\n\n\n\n\n","category":"function"},{"location":"api_internal.html#Internal-API","page":"Internal API","title":"Internal API","text":"These functions are public but not exported. You can use them to define new AMM types or for specialized applications, but in general, the AMM / trading curve functions will be more convenient\n\nThe following functions query information from AMMs. They are supported but you usually want to create a TradingCurve instead and query that.","category":"section"},{"location":"api_internal.html#Other-interface-functions","page":"Internal API","title":"Other interface functions","text":"","category":"section"},{"location":"api_internal.html#AMM-wrappers","page":"Internal API","title":"AMM wrappers","text":"","category":"section"},{"location":"api_internal.html#ConstantFunctionMarketMakers.mk_tc","page":"Internal API","title":"ConstantFunctionMarketMakers.mk_tc","text":"mk_tc(common::TCCommon) <: TradingCurve\n\nCreate a certain trading curve object from an AMM and common data. Must be specialized to the concrete type of common. This is how we capture the relationship from AMMs to TradingCurve's\n\nRequired.\n\n\n\n\n\n","category":"function"},{"location":"api_internal.html#ConstantFunctionMarketMakers.lt_vp","page":"Internal API","title":"ConstantFunctionMarketMakers.lt_vp","text":"lt_vp(amm, v, p)\n\nCompute the invariant and balances at a given portfolio value (in units of the y asset) and price.\n\nThe fallback implementation requires t_l_p and scales the invariant from L=1.\n\n\n\n\n\n","category":"function"},{"location":"api_internal.html#ConstantFunctionMarketMakers.residual","page":"Internal API","title":"ConstantFunctionMarketMakers.residual","text":"residual(amm, l, t)\nresidual(tc, t)\n\nInvariant residual at the given invariant l and balances t. This is 0 iff t is on the given trading curve.\n\nTODO Required? Should be differentiable.\n\n\n\n\n\n","category":"function"},{"location":"api_internal.html#ConstantFunctionMarketMakers.t_l_p","page":"Internal API","title":"ConstantFunctionMarketMakers.t_l_p","text":"t_l_p(amm, l, p)\n\nBalances at the given invariant l and price p. \n\nRequired.\n\n\n\n\n\n","category":"function"},{"location":"api_internal.html#ConstantFunctionMarketMakers.l_t","page":"Internal API","title":"ConstantFunctionMarketMakers.l_t","text":"l_t(amm, t)\n\nInvariant at the given balances t.\n\nRequired.\n\n\n\n\n\n","category":"function"},{"location":"api_internal.html#ConstantFunctionMarketMakers.p_l_t","page":"Internal API","title":"ConstantFunctionMarketMakers.p_l_t","text":"p_l_t(amm, l, t)\n\nPrice at the given invariant l and balances t.\n\nRequired.\n\n\n\n\n\n","category":"function"},{"location":"api_internal.html#ConstantFunctionMarketMakers.display_params","page":"Internal API","title":"ConstantFunctionMarketMakers.display_params","text":"display_params(::AMM; as_bp::Bool)\n\nMust return a list of pairs of strings, for display only. Used in the default implementation of short_str().\n\nRequired.\n\n\n\n\n\n","category":"function"},{"location":"api_internal.html#ConstantFunctionMarketMakers.AMMWithMeta","page":"Internal API","title":"ConstantFunctionMarketMakers.AMMWithMeta","text":"An AMM with metadata of type M attached. Often, M = PlotMeta.\n\n\n\n\n\n","category":"type"},{"location":"api_internal.html#ConstantFunctionMarketMakers.TradingCurveWithMeta","page":"Internal API","title":"ConstantFunctionMarketMakers.TradingCurveWithMeta","text":"A TradingCurve with metadata of type M attached. Often, M = PlotMeta.\n\n\n\n\n\n","category":"type"},{"location":"api_internal.html#ConstantFunctionMarketMakers.ConcentratedAMM","page":"Internal API","title":"ConstantFunctionMarketMakers.ConcentratedAMM","text":"Generic concentrated AMM, using numerical methods to solve the required equations.\n\nNote: concentrate() uses knowledge about some AMMs to yield more efficient versions. ConcentratedAMM() always uses the AMM as an approximate black box. (though some optimization/parameter choice may depend on the inner AMM)\n\n\n\n\n\n","category":"type"},{"location":"index.html#ConstantFunctionMarketMakers.jl","page":"Home","title":"ConstantFunctionMarketMakers.jl","text":"Library for constant function market makers, as used in blockchains. See the readme for quickstart and overview and API Reference for details.\n\nTo define new AMMs and for other special applications, see the Internal API.","category":"section"}]
}
